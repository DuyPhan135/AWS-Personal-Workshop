---
title : "Clean up"
weight : 6
chapter : false
pre : " <b> 5.6. </b> "
---

#### 1. Clean up the backend service generated by terraform

To clean up the backend service created by terraform, run the following command in the terminal:

```bash
terraform destroy -var-file="dev.tfvars"
```

The command will prompt you to confirm the destruction of the resources. Type `yes` and press Enter to proceed.

![Terraform Destroy Processing](/images/5-Workshop/5.6-Cleanup/tf-destroy-processing.png)

Upon successful completion, you will see a message indicating that the resources have been destroyed, but in this case, there are 2 errors which are `deleting-s3-bucket` and `ECR-Repository`. This is because the S3 bucket is not empty and the ECR repository contains images.

![Terraform Destroy Complete](/images/5-Workshop/5.6-Cleanup/tf-destroy-complete.png)

In order to completely remove the S3 bucket and ECR repository, you need to manually delete the objects in the S3 bucket and the images in the ECR repository on AWS Management Console.

#### 2. Delete objects in the S3 bucket

1. Go to the [S3 console](https://s3.console.aws.amazon.com/s3/home).

2. Find the bucket named `webchat-app-dev-uploads-2025-sg123456` like in the screenshot below and click on it.

   ![S3 Bucket List](/images/5-Workshop/5.6-Cleanup/aws-s3-bucket.png)

3. We need to empty the bucket before deleting it. Click on the "Empty" button.

   ![Empty S3 Bucket](/images/5-Workshop/5.6-Cleanup/empty-bucket.png)

4. Confirm the action by typing "permanently delete" in the input box and click on the "Empty bucket" button. After a few moments, the bucket will be emptied.

   ![Confirm Empty S3 Bucket](/images/5-Workshop/5.6-Cleanup/bucket-emptied.png)

5. Now, go back to the S3 bucket list, select the bucket again, and click on the "Delete" button to delete the empty bucket.

   ![Delete S3 Bucket](/images/5-Workshop/5.6-Cleanup/delete-bucket.png)

6. Confirm the deletion by typing the bucket name and clicking on the "Delete" button.

#### 3. Delete images in the ECR repository

1. Go to the [ECR console](https://console.aws.amazon.com/ecr/repositories).
2. Find the repository named `webchat-app-dev-backend` and click on it.
3. Select all images in the repository by checking the checkbox next to "Image Tag".
4. Click on the "Delete" button to delete the selected images.
5. Confirm the image deletion by typing "delete" in the input box and clicking on the "Delete" button.

   ![Confirm Delete ECR Images](/images/5-Workshop/5.6-Cleanup/ecr-repo-delete-image.png)

6. After deleting all images in the repository, go back to the terminal and run the `terraform destroy` command again:

```bash
terraform destroy -var-file="dev.tfvars"
```

This time, the command should complete successfully without any errors.

![Terraform Destroy Complete No Errors](/images/5-Workshop/5.6-Cleanup/tf-destroy-complete-no-error.png)

After completing these steps, you have successfully cleaned up the backend service and all associated resources created by terraform.
